# **Augmentation**
 
API для сервиса аугментации изображений

---

## **Содержание**
1. [Описание проекта](#описание-проекта)
2. [Установка зависимостей](#установка-зависимостей)
3. [Запуск Docker-контейнеров](#запуск-docker-контейнеров)
4. [Применение миграций](#применение-миграций)
5. [Запуск тестов](#запуск-тестов)

---

## **Описание проекта**

Проект разработан для выполнения тестового задания на позицию python backend

Технологии:
- **Backend**: FastAPI + ORM SQLAlchemy
- **База данных**: PostgreSQL
- **Фоновые задачи**: Celery + Redis
- **Контейнеризация**: Docker
- **Миграции**: Alembic
- **S3 хранилище**: Minio

---

## **Установка зависимостей**

Так как проект запускается в контейнерах, то для запуска нужен docker и docker-compose.

Для начала клонируйте репозиторий:

```bash
git clone https://github.com/lyintCode/augmentation.git

```

Далее либо запустите install.sh (только для debian), либо установите docker и docker-compose вручную,  
согласно инструкциям на оффициальных сайтах.

```bash
chmod +x install.sh
./install.sh
```

Этот скрипт установит все зависимости автоматически.

## **Запуск Docker-контейнеров**

```bash
docker-compose up --build
```

После успешного развертывания всех контейнеров, можно перейти на адресу

http://localhost:8000/docs/

или

запустить автоматический скрипт
```bash
chmod +x ./demo.sh
./demo.sh
```

Скрипт *demo.sh* использует curl что бы проверить работу приложения с тестовым изображением в корне проекта

## **Применение миграций**
env.py файл в папке migrations уже создан и заполнен  
Сами миграции применяются автоматически при запуске в контейнере внутри файла entrypoint.sh

## **Запуск тестов**
Для запуска тестов необходимо развернуть виртуальное окружение

```bash
python3 -m venv .venv
source .venv/bin/activate
```

И запустить тесты
```bash
pytest
```

Так же можно запустить mypy, для проверки типизации
```bash
mypy .
```
или
```bash
mypy app
```

